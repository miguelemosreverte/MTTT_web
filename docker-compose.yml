version: '2'
services:
  web:
    build: ./app/
    volumes:
      - "./app:/src/app"
    ports:
      - "3030:3000"
    networks:
      vpcbr:
        ipv4_address: 10.5.0.4

  moses_api:
    build: ./Moses-API/
    volumes:
      - data-volume:/var/lib/moses_api_backup
    ports:
      - "5000:5000"
    networks:
      vpcbr:
        ipv4_address: 10.5.0.5

  corpus_preparation_upload:
    build: ./CorpusPreparationUpload/

    volumes:
      - data-volume:/var/lib/moses_api_backup
    ports:
      - "9000:9000"
    networks:
      vpcbr:
        ipv4_address: 10.5.0.6
    tty: true


volumes:
  data-volume:

networks:
  vpcbr:
    driver: bridge
    ipam:
     config:
       - subnet: 10.5.0.0/16
         gateway: 10.5.0.1
